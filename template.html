<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
<title>{{PRODUCT_NAME}} - {{META_TITLE}}</title>
<meta name="description" content="{{META_DESCRIPTION}}">
<meta name="keywords" content="{{META_KEYWORDS}}">
<meta name="robots" content="index, follow">
<meta name="author" content="{{SITE_NAME}}">
<link rel="canonical" href="{{SITE_URL}}/">

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="product">
<meta property="og:title" content="{{PRODUCT_NAME}} - {{META_TITLE}}">
<meta property="og:description" content="{{META_DESCRIPTION_LONG}} {{DISCOUNT_PERCENT}} - Only ${{PRICE_ORDER}} (was ${{PRICE_ORIGINAL}}). Free shipping & 30-day returns.">
<meta property="og:image" content="{{SITE_URL}}/images/product/product-01.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1600">
<meta property="og:url" content="{{SITE_URL}}/">
<meta property="og:site_name" content="{{SITE_NAME}}">
<meta property="product:price:amount" content="{{PRICE_ORDER}}">
<meta property="product:price:currency" content="USD">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{PRODUCT_NAME}} - {{META_TITLE}}">
<meta name="twitter:description" content="Luxuriously soft {{MATERIAL}} - timeless elegance meets everyday comfort. {{CERTIFICATION_DESCRIPTION}}. {{DISCOUNT_PERCENT}} - Only ${{PRICE_ORDER}}. Free shipping & returns.">
<meta name="twitter:image" content="{{SITE_URL}}/images/product/product-01.png">
<meta name="twitter:image:alt" content="{{PRODUCT_NAME}} - Luxuriously soft {{MATERIAL}}">

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('D3CVHNBC77U2RE92M7O0');
  ttq.page();
  ttq.track('ViewContent', {
    content_id: '{{PRODUCT_SLUG}}',
    content_type: 'product',
    content_name: '{{PRODUCT_NAME}}',
    price: {{PRICE_ORDER}},
    currency: 'USD',
    value: {{PRICE_ORDER}}
  });
}(window, document, 'ttq');
</script>
<!-- End TikTok Pixel Code -->

<!-- Performance Meta -->
<meta name="theme-color" content="{{COLOR_PRIMARY}}">
<meta name="color-scheme" content="light">

<!-- Critical Resource Hints -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//analytics.google.com">

<!-- Google Fonts - Luxury Typography -->
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Preload Critical Hero Image -->
<link rel="preload" as="image" href="./images/product/product-01.png" type="image/png" fetchpriority="high">

<!-- Critical CSS - Ultra-Minimal -->
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{font-family:'Montserrat',sans-serif;color:#1a1a1a;line-height:1.6;background:#fff;-webkit-font-smoothing:antialiased;overflow-x:hidden;max-width:100vw}
img{max-width:100%;height:auto}
h1,h2,h3{font-family:'Cormorant Garamond',serif}

/* Main Page Styles - No Quiz Version */
.main-content{display:block}
.announcement{background:{{COLOR_PRIMARY}};color:#fff;text-align:center;padding:14px;font-size:15px;font-weight:700;position:relative;z-index:10;letter-spacing:0.5px;box-shadow:0 2px 8px rgba({{COLOR_PRIMARY_RGB}},0.2)}
.container{max-width:1200px;margin:0 auto;padding:0 20px;position:relative}
.product-hero{display:grid;grid-template-columns:1fr 1fr;gap:60px;padding:40px 20px;align-items:start;min-height:500px}
.gallery{position:sticky;top:20px;z-index:1}
.main-img{width:100%;height:auto;border-radius:16px;aspect-ratio:3/4;object-fit:cover;background:#f8f8f8;will-change:transform;transition:opacity 0.3s ease;box-shadow:0 4px 20px rgba({{COLOR_PRIMARY_RGB}},0.12)}
.product-info{position:relative;z-index:2}
.product-info h1{font-size:clamp(32px,5vw,44px);font-weight:800;margin-bottom:12px;line-height:1.1;letter-spacing:-0.03em;color:#1a1a1a}
.tagline{color:#555;font-size:clamp(17px,3vw,19px);margin-bottom:24px;font-weight:400;line-height:1.5}
.price-box{display:flex;align-items:center;gap:12px;margin-bottom:12px;padding:10px 14px;background:linear-gradient(135deg,#fff5f7 0%,#ffe8ed 100%);border-radius:8px;border:2px solid {{COLOR_PRIMARY}}}
.price{font-family:'Montserrat',sans-serif;font-size:clamp(28px,6vw,36px);font-weight:700;color:{{COLOR_PRIMARY}};letter-spacing:-0.02em}
.old-price{font-size:clamp(16px,3vw,20px);color:#999;text-decoration:line-through;font-weight:600}
.badge{background:#dc3545;color:#fff;padding:4px 10px;border-radius:16px;font-size:12px;font-weight:700;white-space:nowrap}
.cta-btn{font-family:'Montserrat',sans-serif;width:100%;padding:22px 24px;font-size:20px;font-weight:700;border-radius:12px;border:none;cursor:pointer;margin-bottom:16px;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);transform:translateZ(0);will-change:transform;position:relative;overflow:hidden;text-transform:uppercase;letter-spacing:0.5px;min-height:80px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.cta-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.6s ease;z-index:1;animation:shimmer 3s infinite}
.cta-btn:hover::before{left:100%}
.cta-primary{background:linear-gradient(135deg,{{COLOR_PRIMARY}} 0%,{{COLOR_PRIMARY_DARK}} 50%,{{COLOR_PRIMARY_DARKER}} 100%),repeating-linear-gradient(45deg,transparent,transparent 2px,rgba(255,255,255,0.03) 2px,rgba(255,255,255,0.03) 4px);background-blend-mode:normal;color:#fff;box-shadow:0 4px 16px rgba({{COLOR_PRIMARY_RGB}},0.4),inset 0 1px 0 rgba(255,255,255,0.2);border:3px solid {{COLOR_PRIMARY_DARKEST}};position:relative}
.cta-primary::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,0.3),transparent);transition:width 0.5s,height 0.5s,top 0.5s,left 0.5s;z-index:0}
.cta-primary:hover{transform:translateY(-3px) scale(1.01);box-shadow:0 12px 32px rgba({{COLOR_PRIMARY_RGB}},0.6),0 0 40px rgba({{COLOR_PRIMARY_RGB}},0.3),inset 0 1px 0 rgba(255,255,255,0.3)}
.cta-primary:hover::after{width:300px;height:300px;top:calc(50% - 150px);left:calc(50% - 150px)}
.cta-primary:active{transform:translateY(0) scale(0.98);box-shadow:0 2px 8px rgba({{COLOR_PRIMARY_RGB}},0.4),inset 0 1px 0 rgba(255,255,255,0.1)}
.cta-secondary{background:#fff;color:{{COLOR_PRIMARY}};border:3px solid {{COLOR_PRIMARY}};transition:all 0.3s cubic-bezier(0.4,0,0.2,1)}
.cta-secondary:hover{background:linear-gradient(135deg,#fce4e9 0%,#f8d0d8 100%);transform:translateY(-2px);box-shadow:0 6px 20px rgba({{COLOR_PRIMARY_RGB}},0.25)}
.cta-secondary:active{transform:translateY(0) scale(0.98)}
.btn-subtitle{font-size:13px;font-weight:600;opacity:1;margin-top:6px;position:relative;z-index:2;text-transform:none;letter-spacing:0}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity 0.6s ease,transform 0.6s ease}
.fade-in.visible{opacity:1;transform:translateY(0)}

/* Testimonial Styles - Full Image Below Review */
.testimonial-card{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.04);border:1px solid #f0f0f0;transition:all 0.3s ease;display:flex;flex-direction:column;align-items:stretch}
.testimonial-card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba({{COLOR_PRIMARY_RGB}},0.15);border-color:{{COLOR_PRIMARY}}}
.testimonial-text{font-size:14px;line-height:1.6;color:#333;font-weight:400;width:100%;text-align:left;margin-bottom:16px}
.testimonial-image-container{padding:0;text-align:center;width:100%;margin-bottom:16px}
.testimonial-image{width:100%;height:auto;border-radius:8px;object-fit:cover;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.testimonial-footer{display:flex;align-items:center;justify-content:space-between;gap:12px;width:100%}
.testimonial-info{flex:1;text-align:left}
.testimonial-name{font-weight:600;font-size:14px;margin-bottom:3px;color:#1a1a1a}
.testimonial-platform{display:flex;align-items:center;gap:6px;color:#666;font-size:12px;font-weight:600}
.testimonial-platform svg{width:16px;height:16px}
.testimonial-stars{color:{{COLOR_PRIMARY}};font-size:16px;letter-spacing:2px;text-align:right}
.testimonial-date{color:#999;font-size:11px;margin-top:8px;font-weight:500;width:100%;text-align:right}













/* Size Selector */
.size-btn{font-family:'Montserrat',sans-serif;padding:14px 12px;border:2px solid #e0e0e0;background:#fff;border-radius:8px;cursor:pointer;font-weight:600;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);font-size:14px}
.size-btn:not(:disabled):hover{border-color:{{COLOR_PRIMARY}};transform:scale(1.05);box-shadow:0 4px 12px rgba({{COLOR_PRIMARY_RGB}},0.15)}
.size-btn.selected{background:{{COLOR_PRIMARY}};color:#fff;border-color:{{COLOR_PRIMARY}};box-shadow:0 4px 12px rgba({{COLOR_PRIMARY_RGB}},0.3)}
.size-btn:disabled{opacity:0.4;cursor:not-allowed}

/* Mobile Responsive */
@media(max-width:768px){
.product-hero{grid-template-columns:1fr;gap:30px;padding:20px 16px}
.gallery{position:static}
.container{padding:0 16px}
.main-img{border-radius:12px;box-shadow:0 2px 12px rgba({{COLOR_PRIMARY_RGB}},0.15)}
.product-info h1{font-size:clamp(28px,8vw,36px);margin-bottom:10px}
.tagline{font-size:16px;margin-bottom:16px}
.price-box{padding:8px 12px;margin-bottom:10px;flex-direction:row;align-items:center;gap:8px;flex-wrap:wrap}
.price{font-size:clamp(24px,7vw,30px)}
.old-price{font-size:clamp(14px,4vw,18px)}
.badge{font-size:11px;padding:3px 8px}
.cta-btn{font-size:17px;padding:18px 20px;min-height:70px;letter-spacing:0.3px}
.btn-subtitle{font-size:11px;margin-top:4px}
.size-btn{min-width:50px;min-height:50px;font-size:15px;padding:12px 10px}
.announcement{padding:12px 16px;font-size:13px;line-height:1.4}
.worn-by-favorites-section{padding:40px 16px!important}
.worn-by-favorites-section h2{font-size:clamp(24px,7vw,32px)!important;margin-bottom:12px!important}
.worn-by-favorites-section p{font-size:15px!important;margin-bottom:30px!important}
.worn-by-favorites-section>div>div{grid-template-columns:1fr!important;gap:30px!important}
.worn-by-favorites-section img{width:160px!important;height:160px!important;margin-bottom:16px!important}
.worn-by-favorites-section h3{font-size:18px!important}
.worn-by-favorites-section p{font-size:14px!important}
}

/* Sticky CTA for Mobile */
@media(max-width:768px){
.sticky-cta-mobile{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:12px 16px;box-shadow:0 -4px 20px rgba(0,0,0,0.15);z-index:1000;display:none;border-top:3px solid {{COLOR_PRIMARY}}}
.sticky-cta-mobile.visible{display:block;animation:slideUp 0.3s ease}
}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}

/* Mobile Popup Adjustments */
@media(max-width:768px){
#orderBumpPopup>div{padding:24px 20px;border-radius:12px;max-height:85vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
#orderBumpPopup h2{font-size:24px}
#orderBumpPopup .btn{font-size:16px;padding:16px}
}

@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba({{COLOR_PRIMARY_RGB}},0.4)}50%{box-shadow:0 0 0 10px rgba({{COLOR_PRIMARY_RGB}},0)}}
@keyframes pulse-badge{0%,100%{box-shadow:0 2px 8px rgba(220,53,69,0.3);transform:scale(1)}50%{box-shadow:0 4px 16px rgba(220,53,69,0.5);transform:scale(1.05)}}
@keyframes shimmer{0%{left:-100%}50%{left:100%}100%{left:100%}}

/* GDPR Cookie Consent Banner */
.cookie-banner{position:fixed;bottom:0;left:0;right:0;background:#fff;box-shadow:0 -4px 20px rgba(0,0,0,0.15);padding:20px;z-index:10001;border-top:3px solid {{COLOR_PRIMARY}};display:none;animation:slideUp 0.4s ease}
.cookie-banner.show{display:block}
.cookie-content{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap}
.cookie-text{flex:1;min-width:280px;font-size:14px;color:#333;line-height:1.6}
.cookie-text a{color:{{COLOR_PRIMARY}};text-decoration:underline;font-weight:600}
.cookie-buttons{display:flex;gap:12px;flex-wrap:wrap}
.cookie-btn{padding:12px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:14px;transition:all 0.2s;min-height:44px}
.cookie-btn.accept{background:{{COLOR_PRIMARY}};color:#fff}
.cookie-btn.accept:hover{background:{{COLOR_PRIMARY_DARKEST}};transform:translateY(-2px)}
.cookie-btn.decline{background:#f0f0f0;color:#333}
.cookie-btn.decline:hover{background:#e0e0e0}

/* Custom SVG Icon Styles */
.feature-icon{width:64px;height:64px;margin:0 auto 20px;position:relative}
.feature-icon-bg{fill:{{COLOR_PRIMARY}};opacity:0.1}
.feature-icon-stroke{fill:none;stroke:{{COLOR_PRIMARY}};stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}
.trust-badge{display:flex;align-items:center;gap:10px;padding:12px 16px;background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.06);transition:all 0.3s ease}
.trust-badge:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba({{COLOR_PRIMARY_RGB}},0.15)}
.trust-badge-icon{width:28px;height:28px;flex-shrink:0}
.trust-badge-text{font-size:13px;font-weight:600;color:#333;line-height:1.3}
.social-proof-badge{background:linear-gradient(135deg,#fff5f7 0%,#ffe8ed 100%);border:2px solid {{COLOR_PRIMARY}};border-radius:12px;padding:20px 30px;text-align:center;margin:30px 0}
.social-proof-icon{width:40px;height:40px;margin:0 auto 12px}
.certification-badge{display:inline-flex;align-items:center;gap:8px;background:#f8fff8;border:2px solid #28a745;border-radius:8px;padding:10px 16px;font-size:13px;font-weight:600;color:#28a745}

/* Exit Transition Overlay - Seamless redirect to payment */
.exit-transition{position:fixed;inset:0;background:#FFFFFF;z-index:999999;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity 0.3s ease,visibility 0.3s ease}
.exit-transition.active{opacity:1;visibility:visible}
.exit-transition-content{text-align:center;transform:translateY(20px);opacity:0;transition:transform 0.4s ease 0.1s,opacity 0.4s ease 0.1s;padding:20px}
.exit-transition.active .exit-transition-content{transform:translateY(0);opacity:1}
.exit-spinner{width:44px;height:44px;border:3px solid #E5E7EB;border-top-color:#2563EB;border-radius:50%;margin:0 auto 24px;animation:exitSpin 0.8s linear infinite}
@keyframes exitSpin{to{transform:rotate(360deg)}}
.exit-title{font-size:18px;font-weight:600;color:#1F2937;margin:0 0 8px;font-family:'Montserrat',sans-serif}
.exit-subtitle{font-size:14px;color:#6B7280;margin:0 0 8px;font-family:'Montserrat',sans-serif}
.exit-trust{display:flex;justify-content:center;gap:20px;margin-top:24px;font-size:13px;color:#6B7280;flex-wrap:wrap}
.exit-trust span{display:flex;align-items:center;gap:6px}
.page-exiting .main-content{transform:translateY(-20px);opacity:0;transition:transform 0.25s ease,opacity 0.25s ease}
@media(prefers-reduced-motion:reduce){.exit-transition,.exit-transition-content,.page-exiting .main-content{transition-duration:0.01ms!important}.exit-spinner{animation:none}}
.certification-icon{width:20px;height:20px}

/* Footer Styles */
.site-footer{background:#1a1a1a;color:#fff;padding:40px 20px 20px;margin-top:0}
.footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:30px;margin-bottom:30px}
.footer-section h3{color:{{COLOR_PRIMARY}};font-size:16px;font-weight:700;margin-bottom:12px}
.footer-section p{color:#ccc;font-size:14px;line-height:1.8;margin-bottom:8px}
.footer-section a{color:#ccc;text-decoration:none;display:block;margin-bottom:8px;font-size:14px;transition:color 0.2s}
.footer-section a:hover{color:#fff}
.footer-bottom{border-top:1px solid #333;padding-top:20px;text-align:center;color:#999;font-size:13px}

@media(max-width:768px){
.cookie-content{flex-direction:column;align-items:stretch}
.cookie-buttons{width:100%}
.cookie-btn{flex:1}
.footer-content{grid-template-columns:1fr}
.purchase-toast{left:10px;bottom:80px;max-width:calc(100vw - 20px);padding:12px 16px}
.countdown-timer{flex-direction:column;gap:8px;padding:10px 16px}
.timer-digits{gap:6px}
.timer-box{min-width:40px;padding:6px 10px;font-size:18px}
}

/* Urgency & Scarcity Elements */
.live-viewers{display:flex;align-items:center;gap:8px;background:#fff5f7;padding:10px 16px;border-radius:8px;margin-bottom:16px;border:1px solid rgba({{COLOR_PRIMARY_RGB}},0.15)}
.pulse-dot{width:10px;height:10px;background:#28a745;border-radius:50%;animation:pulse-dot 2s infinite}
@keyframes pulse-dot{0%,100%{box-shadow:0 0 0 0 rgba(40,167,69,0.7)}50%{box-shadow:0 0 0 8px rgba(40,167,69,0)}}
.stock-warning{background:#fff3cd;border-left:4px solid #ff6b35;padding:12px 16px;border-radius:8px;margin-bottom:16px;color:#856404;font-weight:700;font-size:15px}
.soldout-notification{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-100px);background:#dc3545;color:#fff;padding:16px 24px;border-radius:12px;font-weight:700;font-size:15px;box-shadow:0 8px 24px rgba(220,53,69,0.4);z-index:9999;opacity:0;transition:all 0.4s cubic-bezier(0.68,-0.55,0.265,1.55);display:flex;align-items:center;gap:12px;min-width:280px;justify-content:center}
.soldout-notification.show{opacity:1;transform:translateX(-50%) translateY(0)}
.soldout-notification svg{width:24px;height:24px;flex-shrink:0}
.countdown-timer{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);color:#fff;padding:12px 20px;border-radius:10px;margin-bottom:20px;box-shadow:0 4px 12px rgba(220,53,69,0.3);justify-content:center}
.timer-label{font-weight:700;font-size:14px;letter-spacing:0.5px}
.timer-digits{display:flex;gap:8px}
.timer-box{background:rgba(0,0,0,0.2);padding:8px 12px;border-radius:6px;min-width:45px;text-align:center;font-family:monospace;font-size:20px;font-weight:700}
.timer-separator{font-size:20px;font-weight:700;opacity:0.8}
.purchase-toast{position:fixed;bottom:100px;left:20px;background:#fff;padding:16px 20px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.2);z-index:9999;display:flex;align-items:center;gap:12px;max-width:340px;border-left:4px solid #28a745;opacity:0;transform:translateX(-400px);transition:all 0.4s cubic-bezier(0.68,-0.55,0.265,1.55)}
.purchase-toast.show{opacity:1;transform:translateX(0)}
.purchase-toast-icon{background:#28a745;color:#fff;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.purchase-toast-text{flex:1}
.purchase-toast-name{font-weight:700;font-size:14px;color:#1a1a1a;margin-bottom:2px}
.purchase-toast-location{font-size:12px;color:#666}
.purchase-toast-time{font-size:11px;color:#999;margin-top:4px}
.added-today-badge{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);color:#fff;padding:10px 18px;border-radius:24px;font-weight:700;font-size:14px;box-shadow:0 4px 12px rgba(40,167,69,0.3);margin-bottom:20px}
</style>

<!-- Prefetch Additional Images -->
<link rel="prefetch" as="image" href="./images/product/product-02.png">
<link rel="prefetch" as="image" href="./images/product/product-03.png">

<!-- Structured Data - Product Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "{{PRODUCT_NAME}}",
  "image": [
    "{{SITE_URL}}/images/product/product-01.png",
    "{{SITE_URL}}/images/product/product-02.png",
    "{{SITE_URL}}/images/product/product-03.png",
    "{{SITE_URL}}/images/product/product-04.png",
    "{{SITE_URL}}/images/product/product-05.png"
  ],
  "description": "Luxuriously soft {{MATERIAL}} {{PRODUCT_TYPE}} in {{PRODUCT_COLOR_DESCRIPTION}}. Timeless elegance meets everyday comfort. {{CERTIFICATION_DESCRIPTION}}.",
  "sku": "RED-CASH-001",
  "brand": {
    "@type": "Brand",
    "name": "{{SITE_NAME}}"
  },
  "offers": [
    {
      "@type": "Offer",
      "url": "{{SITE_URL}}/",
      "priceCurrency": "USD",
      "price": "{{PRICE_ORDER}}",
      "priceValidUntil": "2025-12-31",
      "availability": "https://schema.org/InStock",
      "itemCondition": "https://schema.org/NewCondition",
      "name": "Regular Shipping",
      "shippingDetails": {
        "@type": "OfferShippingDetails",
        "shippingRate": {
          "@type": "MonetaryAmount",
          "value": "0",
          "currency": "USD"
        },
        "deliveryTime": {
          "@type": "ShippingDeliveryTime",
          "handlingTime": {
            "@type": "QuantitativeValue",
            "minValue": 0,
            "maxValue": 1,
            "unitCode": "DAY"
          },
          "transitTime": {
            "@type": "QuantitativeValue",
            "minValue": 2,
            "maxValue": 5,
            "unitCode": "DAY"
          }
        }
      }
    },
    {
      "@type": "Offer",
      "url": "{{SITE_URL}}/",
      "priceCurrency": "USD",
      "price": "19",
      "priceValidUntil": "2025-12-31",
      "availability": "https://schema.org/PreOrder",
      "itemCondition": "https://schema.org/NewCondition",
      "name": "Pre-Order",
      "shippingDetails": {
        "@type": "OfferShippingDetails",
        "shippingRate": {
          "@type": "MonetaryAmount",
          "value": "0",
          "currency": "USD"
        },
        "deliveryTime": {
          "@type": "ShippingDeliveryTime",
          "handlingTime": {
            "@type": "QuantitativeValue",
            "minValue": 14,
            "maxValue": 21,
            "unitCode": "DAY"
          }
        }
      }
    }
  ],
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "523",
    "bestRating": "5",
    "worstRating": "1"
  },
  "review": [
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Sarah K."
      },
      "reviewBody": "{{TESTIMONIAL_1_TEXT}} and everyone keeps asking where I got it.",
      "datePublished": "2025-11-25"
    },
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Emma L."
      },
      "reviewBody": "{{TESTIMONIAL_2_TEXT}} that doesn't break the bank. The quality is incredible.",
      "datePublished": "2025-11-24"
    }
  ],
  "material": "{{MATERIAL}}",
  "color": "Red",
  "category": "Apparel > Women > {{PRODUCT_TYPE}}s",
  "itemCondition": "https://schema.org/NewCondition"
}
</script>

<!-- Organization Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "{{SITE_NAME}}",
  "url": "{{SITE_URL}}/",
  "logo": "{{SITE_URL}}/images/product/product-01.png",
  "sameAs": []
}
</script>

<!-- Breadcrumb Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{SITE_URL}}/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{PRODUCT_NAME}}",
      "item": "{{SITE_URL}}/"
    }
  ]
}
</script>
</head>

<body>

<!-- Order Bump Popup -->
<div id="orderBumpPopup" role="dialog" aria-modal="true" aria-labelledby="popupTitle" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;align-items:center;justify-content:center;padding:20px;overflow-y:auto">
  <div style="background:#fff;border-radius:16px;max-width:600px;width:100%;padding:40px;position:relative;box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:fadeIn 0.3s ease;margin:auto">
    <button onclick="closeOrderBumpPopup()" aria-label="Close popup" style="position:absolute;top:16px;right:16px;background:none;border:none;font-size:32px;cursor:pointer;color:#999;line-height:1;padding:0;display:flex;align-items:center;justify-content:center;min-width:44px;min-height:44px">&times;</button>
    <div style="text-align:center;margin-bottom:30px">
      <div style="background:{{COLOR_PRIMARY}};color:#fff;display:inline-block;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:700;margin-bottom:20px">COMPLETE THE SET!</div>
      <h2 id="popupTitle" style="font-size:28px;font-weight:700;margin-bottom:12px;color:#1a1a1a">Add the Matching {{ORDER_BUMP_PRODUCT_TYPE}}?</h2>
      <p style="color:#666;font-size:16px">The matching {{ORDER_BUMP_PRODUCT_TYPE}} pairs perfectly with your {{PRODUCT_TYPE}}</p>
    </div>
    <div style="background:#f8f9fa;border-radius:12px;padding:24px;margin-bottom:30px">
      <div style="display:flex;gap:20px;align-items:center">
        <div style="flex:1">
          <h3 style="font-size:20px;font-weight:700;margin-bottom:8px">{{ORDER_BUMP_NAME}}</h3>
          <ul style="list-style:none;padding:0;margin:0">
            {{ORDER_BUMP_FEATURES}}
          </ul>
        </div>
        <div style="text-align:center">
          <div style="font-size:14px;color:#999;text-decoration:line-through">$49</div>
          <div style="font-size:32px;font-weight:700;color:#28a745">${{PRICE_BUMP}}</div>
          <div style="background:#28a745;color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:700;margin-top:8px">80% OFF</div>
        </div>
      </div>
    </div>
    <div id="orderSummary" style="background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:20px;margin-bottom:24px">
      <!-- Dynamic order summary -->
    </div>
    <button onclick="acceptOrderBump()" style="width:100%;background:#28a745;color:#fff;border:none;padding:20px;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer;margin-bottom:12px;transition:all 0.2s;min-height:64px;box-shadow:0 4px 12px rgba(40,167,69,0.3)">
      <div style="font-size:20px;margin-bottom:4px">YES! Add {{ORDER_BUMP_PRODUCT_TYPE}} - ${{PRICE_BUMP}}</div>
      <div style="font-size:13px;opacity:0.9;font-weight:600">Complete Your Luxury Set (80% OFF)</div>
    </button>
    <button onclick="declineOrderBump()" style="width:100%;background:#fff;color:#666;border:2px solid #ddd;padding:14px;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;min-height:50px">
      No thanks, I'll just take the {{PRODUCT_TYPE}}
    </button>
  </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
  <!-- Worn by Your Favorites - Horizontal Top Bar -->
  <div style="background:linear-gradient(135deg,{{COLOR_PRIMARY}} 0%,{{COLOR_PRIMARY_DARKEST}} 100%);padding:12px 20px;color:#fff">
    <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap">
      <span style="font-weight:700;font-size:13px;text-transform:uppercase;letter-spacing:1px;opacity:0.9">WORN BY YOUR FAVORITES</span>
      <span style="opacity:0.5;margin:0 8px">|</span>
      <div style="display:flex;align-items:center;gap:20px">
        <div style="display:flex;align-items:center;gap:8px">
          <img src="./images/worn-by-favorites/alix-earle.webp" alt="Alix Earle" style="width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.5)" loading="eager">
          <span style="font-weight:600;font-size:13px">Alix Earle</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <img src="./images/worn-by-favorites/monet-mcmichael.webp" alt="Monet McMichael" style="width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.5)" loading="eager">
          <span style="font-weight:600;font-size:13px">Monet McMichael</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <img src="./images/worn-by-favorites/alex-cooper.webp" alt="Alex Cooper" style="width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.5)" loading="eager">
          <span style="font-weight:600;font-size:13px">Alex Cooper</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="product-hero">
      <div class="gallery">
        <img class="main-img fade-in visible" id="heroImage" src="./images/product/product-01.png" alt="Luxurious {{PRODUCT_COLOR_NAME_LOWER}} {{PRODUCT_TYPE}} - {{MATERIAL}} crew neck in rich {{PRODUCT_COLOR_DESCRIPTION}}, showcasing soft texture and timeless elegant design" width="600" height="800" loading="eager" decoding="async">
        <div id="thumbs" style="display:flex;gap:10px;margin-top:15px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin"></div>
      </div>

      <div class="product-info">
        <h1 class="fade-in visible">{{PRODUCT_NAME}}</h1>
        <p class="tagline fade-in visible">{{PRODUCT_TAGLINE}}</p>
        <!-- Live Viewer Count -->
        <div class="live-viewers">
          <span class="pulse-dot"></span>
          <span style="font-weight:600;font-size:14px;color:#333">
            <span id="viewerCount">32</span> people viewing this right now
          </span>
        </div>


        {{CERTIFICATION_BADGE}}

        <div class="price-box fade-in visible">
          <span class="price">${{PRICE_ORDER}}</span>
          <span class="old-price">${{PRICE_ORIGINAL}}</span>
          <span class="badge">{{DISCOUNT_PERCENT}}</span>
        </div>

        <!-- Stock Counter -->
        <div class="stock-warning">
          Only <span id="stockCount">23</span> left in stock!
        </div>

        <!-- Added Today Badge -->
        <div class="added-today-badge">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 00-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"/>
          </svg>
          <span><strong>847</strong> customers added this today</span>
        </div>

        <!-- Size Selector -->
        <div style="margin:20px 0">
          <div style="font-weight:600;font-size:14px;margin-bottom:12px;color:#1a1a1a">Select Size:</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="size-btn" id="sizeXS" onclick="selectSize(this, 'XS')">XS</button>
            <button class="size-btn" onclick="selectSize(this, 'S')">S</button>
            <button class="size-btn selected" onclick="selectSize(this, 'M')">M</button>
            <button class="size-btn" onclick="selectSize(this, 'L')">L</button>
            <button class="size-btn" disabled onclick="selectSize(this, 'XL')">XL<span style="display:block;font-size:10px;color:#dc3545">Sold Out</span></button>
            <button class="size-btn" disabled onclick="selectSize(this, 'XXL')">XXL<span style="display:block;font-size:10px;color:#dc3545">Sold Out</span></button>
          </div>
        </div>

        <button class="cta-btn cta-primary fade-in visible" id="primaryCTA" onclick="handleAddToCart('primary')">
          <span style="font-size:22px">ADD TO CART - ${{PRICE_ORDER}}</span>
          <div class="btn-subtitle">Free Shipping - Ships Today</div>
        </button>

        <button class="cta-btn fade-in visible" id="secondaryCTA" style="background:#fff;color:{{COLOR_PRIMARY}};border:2px solid {{COLOR_PRIMARY}}" onclick="handleAddToCart('secondary')">
          <span style="font-size:20px">PRE-ORDER - ${{PRICE_PREORDER}}</span>
          <div class="btn-subtitle">Ships in 2-3 Weeks - Save $40</div>
        </button>

        <!-- Trust Badge Row -->
        <div style="background:#f8f9fa;border-radius:12px;padding:20px;margin:20px 0">
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px">
            <div class="trust-badge">
              <svg class="trust-badge-icon" viewBox="0 0 24 24">
                <path d="M3 7l6-4 6 4v5c0 3.9-2.7 7.5-6 8.5C5.7 19.5 3 15.9 3 12V7z" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 11l-3 3M9 11l3-3" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M15 7h4v8l-4 2" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div class="trust-badge-text">Free<br>Shipping</div>
            </div>
            <div class="trust-badge">
              <svg class="trust-badge-icon" viewBox="0 0 24 24">
                <path d="M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10z" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5"/>
                <path d="M12 6v6l4 2" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 18a1 1 0 100-2 1 1 0 000 2zM8 18a1 1 0 100-2 1 1 0 000 2z" fill="{{COLOR_PRIMARY}}"/>
              </svg>
              <div class="trust-badge-text">30-Day<br>Returns</div>
            </div>
            <div class="trust-badge">
              <svg class="trust-badge-icon" viewBox="0 0 24 24">
                <path d="M12 2L3 7v6c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V7l-9-5z" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 12l2 2 4-4" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div class="trust-badge-text">Secure<br>Checkout</div>
            </div>
            <div class="trust-badge">
              <svg class="trust-badge-icon" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 9v6M9 12h6" stroke="{{COLOR_PRIMARY}}" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <div class="trust-badge-text">4.9/5<br>Rating</div>
            </div>
          </div>
        </div>

        <!-- Trust Badges -->
        <div style="background:#f8f9fa;border-radius:12px;padding:20px;margin-top:20px">
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px">
            <div style="display:flex;align-items:center;gap:8px;background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.05)">
              <svg width="20" height="20" fill="#28a745" viewBox="0 0 24 24"><path d="M12 2L3 7v6c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V7l-9-5z"/><path d="M9 12l2 2 4-4" stroke="#fff" stroke-width="2" fill="none"/></svg>
              <span style="font-size:13px;font-weight:600;color:#333">{{CERTIFICATION_SHORT}}</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.05)">
              <svg width="20" height="20" fill="#28a745" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.6 3.8 10.8 9 12 5.2-1.2 9-6.4 9-12V5l-9-4z"/></svg>
              <span style="font-size:13px;font-weight:600;color:#333">Secure Checkout</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.05)">
              <svg width="20" height="20" fill="#28a745" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9 12l2 2 4-4" stroke="#fff" stroke-width="2" fill="none"/></svg>
              <span style="font-size:13px;font-weight:600;color:#333">Free Returns</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.05)">
              <svg width="20" height="20" fill="#28a745" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
              <span style="font-size:13px;font-weight:600;color:#333">Fast Shipping</span>
            </div>
          </div>
          <div style="background:#f8fff8;border:2px solid #28a745;border-radius:8px;padding:14px;text-align:center">
            <div style="font-weight:700;font-size:15px;color:#28a745;margin-bottom:2px">30-Day Money-Back Guarantee</div>
            <div style="color:#555;font-size:12px">Don't love it? Return for free. No questions asked.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lazy Content Container -->

  <!-- Why Choose - Compact -->
  <div style="padding:30px 20px;background:#f8f9fa;border-top:1px solid #e0e0e0">
    <div style="max-width:900px;margin:0 auto;display:flex;justify-content:center;gap:30px;flex-wrap:wrap;align-items:flex-start">
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9 12l2 2 4-4"/></svg>
        <span style="font-size:13px;font-weight:600;color:#333">{{MATERIAL}}</span>
      </div>
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="2"><path d="M12 2l3 6h6l-5 4 2 6-6-4-6 4 2-6-5-4h6z"/></svg>
        <span style="font-size:13px;font-weight:600;color:#333">10,000+ Happy Customers</span>
      </div>
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="{{COLOR_PRIMARY}}" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        <span style="font-size:13px;font-weight:600;color:#333">30-Day Money Back</span>
      </div>
    </div>
  </div>
  <div id="lazyContent"></div>
</div>

<!-- Mobile Sticky CTA -->
<div class="sticky-cta-mobile" id="stickyCTA">
  <button class="cta-btn cta-primary" onclick="handleAddToCart('primary')" style="width:100%;padding:16px;font-size:16px;min-height:56px;margin-bottom:0">
    <span style="font-size:18px">ADD TO CART - ${{PRICE_ORDER}}</span>
    <div class="btn-subtitle" style="font-size:11px">Free Shipping - Ships Today</div>
  </button>
</div>

<!-- Site Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>{{SITE_NAME}}</h3>
      <p>{{BRAND_DESCRIPTION}}. {{FOOTER_DESCRIPTION}}.</p>
    </div>
    <div class="footer-section">
      <h3>Customer Service</h3>
      <a href="mailto:support@{{SITE_DOMAIN}}">Contact Us</a>
      <a href="mailto:returns@{{SITE_DOMAIN}}">Returns & Exchanges</a>
      <a href="#shipping">Shipping Information</a>
    </div>
    <div class="footer-section">
      <h3>Legal</h3>
      <a href="privacy.html">Privacy Policy</a>
      <a href="terms.html">Terms of Service</a>
      <a href="#" onclick="showCookieSettings(); return false;">Cookie Settings</a>
    </div>
    <div class="footer-section">
      <h3>Follow Us</h3>
      <p>Join our community and stay updated on new arrivals and exclusive offers.</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 {{SITE_NAME}}. All rights reserved.</p>
  </div>
</footer>

<!-- GDPR Cookie Consent Banner -->
<div id="cookieBanner" class="cookie-banner">
  <div class="cookie-content">
    <div class="cookie-text">
      <strong>We use cookies to improve your experience</strong><br>
      This website uses essential cookies for functionality and analytics cookies (TikTok Pixel) to measure advertising effectiveness. By clicking "Accept", you consent to our use of cookies. <a href="privacy.html">Learn more in our Privacy Policy</a>
    </div>
    <div class="cookie-buttons">
      <button class="cookie-btn decline" onclick="handleCookieConsent(false)">Decline</button>
      <button class="cookie-btn accept" onclick="handleCookieConsent(true)">Accept All Cookies</button>
    </div>
  </div>
</div>

<script>
// Performance Metrics
const perfMetrics = { marks: {}, mark(name) { this.marks[name] = performance.now(); } };
perfMetrics.mark('script-start');

// Initialize on DOM ready (no quiz - direct to product)
document.addEventListener('DOMContentLoaded', function() {
  loadThumbnails();
  loadRemainingContent();
  perfMetrics.mark('content-loaded');

  // XS size sells out after 15 seconds
  setTimeout(function() {
    const xsButton = document.getElementById('sizeXS');
    const notification = document.getElementById('soldoutNotification');

    if (xsButton && notification) {
      // Disable XS button
      xsButton.disabled = true;
      xsButton.innerHTML = 'XS<span style="display:block;font-size:10px;color:#dc3545">Sold Out</span>';

      // If XS was selected, switch to M
      if (xsButton.classList.contains('selected')) {
        xsButton.classList.remove('selected');
        xsButton.style.background = '#fff';
        xsButton.style.color = '#000';
        xsButton.style.borderColor = '#e0e0e0';

        const mButton = document.querySelector('.size-btn[onclick*="M"]');
        if (mButton) {
          mButton.classList.add('selected');
          mButton.style.background = '{{COLOR_PRIMARY}}';
          mButton.style.color = '#fff';
          mButton.style.borderColor = '{{COLOR_PRIMARY}}';
          window.selectedSize = 'M';
        }
      }

      // Show notification
      notification.classList.add('show');

      // Hide notification after 3 seconds
      setTimeout(function() {
        notification.classList.remove('show');
      }, 3000);
    }
  }, 15000); // 15 seconds
});

// ESC key to close popup
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const popup = document.getElementById('orderBumpPopup');
    if (popup && popup.style.display === 'flex') {
      closeOrderBumpPopup();
    }
  }
});

// Click outside popup to close
document.getElementById('orderBumpPopup')?.addEventListener('click', function(e) {
  if (e.target === this) {
    closeOrderBumpPopup();
  }
});

// Product Images
const productImages = ['product-01.png', 'product-02.png', 'product-03.png', 'product-04.png', 'product-05.png'];

function loadThumbnails() {
  const thumbsContainer = document.getElementById('thumbs');
  thumbsContainer.innerHTML = '';

  const altTexts = [
    '{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} front view - luxurious {{MATERIAL}} in {{PRODUCT_COLOR_DESCRIPTION}}',
    '{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} detail view - close-up of premium soft cashmere texture',
    '{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} lifestyle view - elegant styling with timeless design',
    '{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} side view - classic crew neck silhouette',
    '{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} back view - showcasing quality craftsmanship'
  ];

  productImages.forEach((src, i) => {
    const thumb = document.createElement('img');
    thumb.src = `./images/product/${src}`;
    thumb.alt = altTexts[i] || `{{PRODUCT_COLOR_NAME}} {{PRODUCT_TYPE}} view ${i + 1}`;
    thumb.loading = 'lazy';
    thumb.style.cssText = `width:80px;height:100px;border-radius:8px;cursor:pointer;border:2px solid ${i === 0 ? '{{COLOR_PRIMARY}}' : 'transparent'};object-fit:cover;transition:all 0.2s`;
    thumb.onclick = () => switchMainImage(src, thumb);
    thumbsContainer.appendChild(thumb);
  });
}

function switchMainImage(src, thumbElement) {
  const heroImg = document.getElementById('heroImage');
  heroImg.src = `./images/product/${src}`;

  document.querySelectorAll('#thumbs img').forEach(t => t.style.borderColor = 'transparent');
  thumbElement.style.borderColor = '{{COLOR_PRIMARY}}';
}

// Size and Cart Functions
window.selectedSize = null;
window.currentOrderType = null;

function selectSize(button, size) {
  document.querySelectorAll('.size-btn').forEach(btn => {
    btn.classList.remove('selected');
    btn.style.background = '#fff';
    btn.style.color = '#000';
    btn.style.borderColor = '#e0e0e0';
  });

  button.classList.add('selected');
  button.style.background = '{{COLOR_PRIMARY}}';
  button.style.color = '#fff';
  button.style.borderColor = '{{COLOR_PRIMARY}}';

  window.selectedSize = size;
}

// SimpleSwap Pool Integration
const SIMPLESWAP_POOL_API = 'https://simpleswap-automation-1.onrender.com';
let requestInFlight = false;  // Race condition protection

async function getExchangeFromPool(amountUSD) {
  if (requestInFlight) {
    return;
  }
  requestInFlight = true;
  try {
    const btn = document.querySelector('.cta-btn.cta-primary');
    const originalText = btn ? btn.innerHTML : '';
    if (btn) btn.innerHTML = 'Creating your order...<div class="btn-subtitle">Please wait</div>';

    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 30000);

    // Use Netlify function proxy to bypass CORS
    const response = await fetch('/.netlify/functions/buy-now', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amountUSD: amountUSD }),
      signal: controller.signal
    });

    clearTimeout(timeoutId);
    const data = await response.json();

    if (data.success && data.exchangeUrl) {
      redirectWithTransition(data.exchangeUrl);
    } else {
      alert('Unable to create order. Please try again.');
      if (btn) btn.innerHTML = originalText;
    }
  } catch (error) {
    alert(error.name === 'AbortError' ? 'Request timeout. Please try again.' : 'Payment error. Please try again.');
    // Restore button state on error
    const btn = document.querySelector('.cta-btn.cta-primary');
    if (btn) btn.innerHTML = '<span style="font-size:22px">ADD TO CART - ${{PRICE_ORDER}}</span><div class="btn-subtitle">Free Shipping - Ships Today</div>';
  } finally {
    requestInFlight = false;  // Reset race condition flag
  }
}

async function processOrder(amountUSD) {
  if (typeof ttq !== 'undefined') {
    ttq.track('Purchase', {
      content_id: '{{PRODUCT_SLUG}}',
      content_type: 'product',
      content_name: '{{PRODUCT_NAME}}',
      price: amountUSD,
      quantity: 1,
      currency: 'USD',
      value: amountUSD
    });
  }
  await getExchangeFromPool(amountUSD);
}

function handleAddToCart(type) {
  perfMetrics.mark(`cta-clicked-${type}`);
  window.currentOrderType = type;

  // Set default size if none selected
  if (!window.selectedSize) {
    window.selectedSize = 'M';
  }

  // Only show order bump popup for pre-order (${{PRICE_PREORDER}}) tier
  if (type === 'secondary') {
    showOrderBumpPopup(type);
  } else {
    // Primary tier (${{PRICE_ORDER}}) - skip popup, go straight to checkout
    processOrder(59);
  }
}


function showOrderBumpPopup(type) {
  const basePrice = type === 'primary' ? 59 : 19;
  const bumpPrice = 10;
  const total = basePrice + bumpPrice;

  document.getElementById('orderSummary').innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <span style="color:#666">${type === 'primary' ? '{{PRODUCT_NAME}}' : 'Pre-Order: {{PRODUCT_NAME}}'}</span>
      <span style="font-weight:600">$${basePrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e0e0e0">
      <span style="color:#28a745;font-weight:600">+ Matching {{ORDER_BUMP_PRODUCT_TYPE}}</span>
      <span style="font-weight:600;color:#28a745">$${bumpPrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <span style="font-size:18px;font-weight:700">Total</span>
      <span style="font-size:24px;font-weight:700;color:#000">$${total}</span>
    </div>
  `;

  document.getElementById('orderBumpPopup').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function closeOrderBumpPopup() {
  document.getElementById('orderBumpPopup').style.display = 'none';
  document.body.style.overflow = 'auto';
}

function acceptOrderBump() {
  closeOrderBumpPopup();
  // API only accepts: 19, 29, 59
  // Primary (${{PRICE_ORDER}}) + bustier = use ${{PRICE_ORDER}} (bustier bonus included)
  // Pre-order (${{PRICE_PREORDER}}) + bustier = $29 (supported)
  const amount = window.currentOrderType === 'primary' ? 59 : 29;
  processOrder(amount);
}

function declineOrderBump() {
  closeOrderBumpPopup();
  const amount = window.currentOrderType === 'primary' ? 59 : 19;
  processOrder(amount);
}

// Seamless Exit Transition for Payment Redirect
function redirectWithTransition(url) {
  const overlay = document.getElementById('exitTransition');
  const mainContent = document.querySelector('.main-content');

  if (!overlay) {
    // Fallback if overlay doesn't exist
    window.location.href = url;
    return;
  }

  // Update ARIA for accessibility
  overlay.setAttribute('aria-busy', 'true');

  // Step 1: Slide main content out
  if (mainContent) {
    document.body.classList.add('page-exiting');
  }

  // Step 2: Show white overlay with spinner
  setTimeout(function() {
    overlay.classList.add('active');
  }, 100);

  // Step 3: Redirect after animation completes
  setTimeout(function() {
    window.location.href = url;
  }, 500);
}

// Testimonial Image Mapping - map img number to actual filename (URL-encoded)
const testimonialImages = {
  1: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(1).png',
  2: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(2).png',
  3: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(3).png',
  4: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(4).png',
  5: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(5).png',
  6: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(6).png',
  7: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(7).png',
  8: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(8).png',
  9: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(9).png',
  10: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(10).png',
  11: 'Gemini_Generated_Image_iij8huiij8huiij8%20(1).png',
  12: 'Gemini_Generated_Image_iij8huiij8huiij8%20(2).png',
  13: 'Gemini_Generated_Image_iij8huiij8huiij8%20(3).png',
  14: 'Gemini_Generated_Image_iij8huiij8huiij8%20(4).png',
  15: 'Gemini_Generated_Image_iij8huiij8huiij8%20(5).png',
  16: 'Gemini_Generated_Image_iij8huiij8huiij8%20(6).png',
  17: 'Gemini_Generated_Image_iij8huiij8huiij8%20(7).png',
  18: 'Gemini_Generated_Image_iij8huiij8huiij8%20(8).png',
  19: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(1).png',
  20: 'Gemini_Generated_Image_7kvmzu7kvmzu7kvm%20(2).png'
};

// SVG Platform Icons
const platformSVGs = {
  tiktok: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/></svg>`,
  instagram: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>`,
  facebook: `<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>`,
  trustpilot: `<svg viewBox="0 0 24 24" fill="#00b67a"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>`,
  google: `<svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>`
};

const platformColors = {
  tiktok: '#000000',
  instagram: '#E4405F',
  facebook: '#1877F2',
  trustpilot: '#00b67a',
  google: '#4285F4'
};

// Testimonial Data - AUTO-GENERATED by Agent 4 (15-25 reviews, product-specific)
const testimonials = {{TESTIMONIALS_JSON}};

// Load Remaining Content
function loadRemainingContent() {
  const lazyContent = document.getElementById('lazyContent');

  lazyContent.innerHTML = `
    <!-- Featured Review Carousel Section -->
    <div class="fade-in" style="padding:60px 20px;background:#fff;border-bottom:2px solid #f0f0f0">
      <div style="max-width:1200px;margin:0 auto">
        <h2 style="text-align:center;font-size:36px;font-weight:800;margin-bottom:12px;color:#1a1a1a;letter-spacing:-0.02em">What Our Customers Are Saying</h2>
        <p style="text-align:center;color:#666;font-size:17px;margin-bottom:50px">Real reviews from verified purchases</p>

        <!-- Featured Review Carousel -->
        <div style="max-width:800px;margin:0 auto;position:relative">
          <div id="featuredCarousel" style="background:#fff;border-radius:16px;padding:50px 40px;box-shadow:0 10px 40px rgba({{COLOR_PRIMARY_RGB}},0.12);position:relative;overflow:hidden;min-height:320px">
            <!-- Large decorative quote mark -->
            <svg style="position:absolute;top:20px;left:30px;width:60px;height:60px;opacity:0.1;fill:{{COLOR_PRIMARY}}" viewBox="0 0 24 24">
              <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
            </svg>

            <!-- Review content will be injected here by JavaScript -->
            <div id="carouselContent"></div>
          </div>

          <!-- Dot Navigation -->
          <div id="carouselDots" style="display:flex;justify-content:center;align-items:center;gap:10px;margin-top:30px"></div>
        </div>
      </div>
    </div>

    <!-- Testimonials Section -->
    <div class="fade-in" style="padding:60px 20px;background:#f8f9fa">
      <div style="max-width:1200px;margin:0 auto">
        <h2 style="text-align:center;font-size:32px;font-weight:800;margin-bottom:20px;color:#1a1a1a">More Customer Reviews</h2>

        <!-- Rating Summary -->
        <div style="background:#fff;border-radius:16px;padding:30px;margin-bottom:40px;box-shadow:0 4px 16px rgba(0,0,0,0.08);border:2px solid {{COLOR_PRIMARY}}">
          <div style="display:flex;align-items:center;justify-content:center;gap:40px;flex-wrap:wrap">
            <div style="text-align:center">
              <div style="font-size:56px;font-weight:900;color:{{COLOR_PRIMARY}};line-height:1">4.9</div>
              <div style="color:#ffc107;font-size:24px;letter-spacing:2px;margin:8px 0"></div>
              <div style="color:#666;font-size:14px;font-weight:600">Based on 523+ reviews</div>
            </div>
            <div style="border-left:2px solid #e0e0e0;padding-left:40px">
              <div style="margin-bottom:8px;display:flex;align-items:center;gap:10px">
                <span style="font-weight:600;color:#333">Quality:</span>
                <div style="background:#e0e0e0;height:8px;width:120px;border-radius:4px;overflow:hidden">
                  <div style="background:{{COLOR_PRIMARY}};height:100%;width:98%"></div>
                </div>
                <span style="font-weight:700;color:{{COLOR_PRIMARY}}">98%</span>
              </div>
              <div style="margin-bottom:8px;display:flex;align-items:center;gap:10px">
                <span style="font-weight:600;color:#333">Comfort:</span>
                <div style="background:#e0e0e0;height:8px;width:120px;border-radius:4px;overflow:hidden">
                  <div style="background:{{COLOR_PRIMARY}};height:100%;width:96%"></div>
                </div>
                <span style="font-weight:700;color:{{COLOR_PRIMARY}}">96%</span>
              </div>
              <div style="display:flex;align-items:center;gap:10px">
                <span style="font-weight:600;color:#333">Value:</span>
                <div style="background:#e0e0e0;height:8px;width:120px;border-radius:4px;overflow:hidden">
                  <div style="background:{{COLOR_PRIMARY}};height:100%;width:99%"></div>
                </div>
                <span style="font-weight:700;color:{{COLOR_PRIMARY}}">99%</span>
              </div>
            </div>
          </div>
        </div>

        <div id="testimonialGrid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100%,350px),1fr));gap:24px">
          ${renderTestimonials(10)}
        </div>

        <div style="text-align:center;margin-top:40px">
          <button id="loadMoreBtn" onclick="loadMoreReviews()" style="background:#5C5346;color:#fff;border:none;padding:16px 40px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.2s">
            Load More Reviews
          </button>
        </div>
      </div>
    </div>

    <!-- Final CTA -->
    <div class="fade-in" style="padding:80px 20px;text-align:center;background:linear-gradient(135deg,{{COLOR_PRIMARY}} 0%,{{COLOR_PRIMARY_DARK}} 100%);color:#fff">
      <h2 style="font-size:clamp(28px,5vw,40px);font-weight:700;margin-bottom:16px">Experience Pure Cashmere Luxury</h2>
      <p style="font-size:18px;opacity:0.9;margin-bottom:30px;max-width:600px;margin-left:auto;margin-right:auto">Only 32 {{PRODUCT_TYPE}}s left in stock. 30-day money-back guarantee. Free returns.</p>
      <button onclick="document.querySelector('.product-hero').scrollIntoView({behavior:'smooth'})" style="background:#fff;color:{{COLOR_PRIMARY}};border:none;padding:20px 60px;border-radius:12px;font-size:20px;font-weight:800;cursor:pointer;transition:all 0.2s;box-shadow:0 8px 24px rgba(0,0,0,0.2);min-height:64px">
        CLAIM YOURS NOW
      </button>
    </div>
  `;

  // Animate elements
  requestAnimationFrame(() => {
    document.querySelectorAll('.fade-in').forEach((el, i) => {
      setTimeout(() => el.classList.add('visible'), i * 100);
    });
  });
}

function renderTestimonials(count) {
  return testimonials.slice(0, count).map(t => `
    <div class="testimonial-card">
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-image-container">
        <img src="./images/testimonials/${testimonialImages[t.img]}" alt="${t.name} wearing {{PRODUCT_COLOR_NAME_LOWER}} {{PRODUCT_TYPE}}" class="testimonial-image" loading="lazy">
      </div>
      <div class="testimonial-footer">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified Purchase</span>
          </div>
        </div>
        <div class="testimonial-stars">${''.repeat(t.rating)}${''.repeat(5-t.rating)}</div>
      </div>
      <div class="testimonial-date">${t.date}</div>
    </div>
  `).join('');
}

let reviewsLoaded = 10;
function loadMoreReviews() {
  const grid = document.getElementById('testimonialGrid');
  const remaining = testimonials.slice(reviewsLoaded);

  remaining.forEach((t, i) => {
    const card = document.createElement('div');
    card.className = 'testimonial-card';
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.innerHTML = `
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-image-container">
        <img src="./images/testimonials/${testimonialImages[t.img]}" alt="${t.name} wearing {{PRODUCT_COLOR_NAME_LOWER}} {{PRODUCT_TYPE}}" class="testimonial-image" loading="lazy">
      </div>
      <div class="testimonial-footer">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified Purchase</span>
          </div>
        </div>
        <div class="testimonial-stars">${''.repeat(t.rating)}${''.repeat(5-t.rating)}</div>
      </div>
      <div class="testimonial-date">${t.date}</div>
    `;
    grid.appendChild(card);

    setTimeout(() => {
      card.style.transition = 'all 0.4s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, i * 50);
  });

  reviewsLoaded = testimonials.length;
  document.getElementById('loadMoreBtn').style.display = 'none';
}

// Mobile Sticky CTA - Show after scrolling past hero
if (window.innerWidth <= 768) {
  let lastScrollY = window.scrollY;
  window.addEventListener('scroll', () => {
    const stickyCTA = document.getElementById('stickyCTA');
    const productHero = document.querySelector('.product-hero');

    if (productHero && stickyCTA) {
      const heroBottom = productHero.offsetTop + productHero.offsetHeight;
      const scrolledPastHero = window.scrollY > heroBottom;
      const scrollingUp = window.scrollY < lastScrollY;

      if (scrolledPastHero && scrollingUp) {
        stickyCTA.classList.add('visible');
      } else if (!scrolledPastHero) {
        stickyCTA.classList.remove('visible');
      }

      lastScrollY = window.scrollY;
    }
  });
}

// Initialize on load
window.addEventListener('load', () => {
  perfMetrics.mark('window-loaded');

  // Register Service Worker for caching
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').catch(() => {});
  }

  // Show cookie banner if consent not given
  checkCookieConsent();
});

// GDPR Cookie Consent Functions
function checkCookieConsent() {
  const consent = localStorage.getItem('cookieConsent');
  if (!consent) {
    // Show banner after a brief delay for better UX
    setTimeout(() => {
      document.getElementById('cookieBanner').classList.add('show');
    }, 1000);
  } else if (consent === 'accepted') {
    // User previously accepted - analytics already loaded via TikTok Pixel in head
    console.log('Cookie consent: accepted');
  } else {
    // User declined - could disable non-essential cookies here if needed
    console.log('Cookie consent: declined');
  }
}

function handleCookieConsent(accepted) {
  const banner = document.getElementById('cookieBanner');
  banner.classList.remove('show');

  if (accepted) {
    localStorage.setItem('cookieConsent', 'accepted');
    // TikTok Pixel already loaded in head, no action needed
  } else {
    localStorage.setItem('cookieConsent', 'declined');
    // Note: TikTok Pixel already loaded. In production, you'd conditionally load it
    // or disable tracking here. For now, we just record the preference.
  }
}

// Featured Review Carousel - 5 Premium Reviews
// Featured Review Carousel - AUTO-GENERATED by Agent 4 (5 premium reviews, product-specific)
const featuredReviews = {{FEATURED_REVIEWS_JSON}};

let currentCarouselIndex = 0;
let carouselInterval = null;
let isPaused = false;

function renderCarouselReview(index) {
  const review = featuredReviews[index];
  const content = document.getElementById('carouselContent');
  
  if (!content) return;
  
  // Create star string
  const stars = '\u2605'.repeat(review.rating);
  
  // Fade out
  content.style.opacity = '0';
  content.style.transition = 'opacity 0.3s ease';
  
  setTimeout(() => {
    content.innerHTML = "<div style=\"text-align:center;position:relative;z-index:2\"><div style=\"color:#ffc107;font-size:32px;letter-spacing:4px;margin-bottom:20px\">" + stars + "</div><p style=\"font-size:20px;line-height:1.8;color:#333;margin-bottom:30px;font-weight:400;max-width:700px;margin-left:auto;margin-right:auto;font-style:italic\">\"" + review.text + "\"</p><div style=\"display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:16px\"><div style=\"font-size:18px;font-weight:700;color:#1a1a1a\">" + review.name + "</div><div style=\"display:flex;align-items:center;gap:6px;background:" + review.platformColor + ";color:#fff;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:600\"><svg style=\"width:14px;height:14px;fill:#fff\" viewBox=\"0 0 24 24\"><path d=\"M9 12l2 2 4-4\" stroke=\"#fff\" stroke-width=\"2\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"#fff\" stroke-width=\"2\"/></svg><span>Verified Purchase</span></div></div><div style=\"color:" + review.platformColor + ";font-size:14px;font-weight:600;margin-bottom:20px;text-transform:capitalize\">via " + review.platform + "</div><div style=\"display:flex;align-items:center;justify-content:center;gap:8px;color:#666;font-size:14px\"><svg style=\"width:18px;height:18px;fill:{{COLOR_PRIMARY}}\" viewBox=\"0 0 24 24\"><path d=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"/></svg><span style=\"font-weight:600\">" + review.helpful + " people found this helpful</span></div></div>";
    
    setTimeout(() => {
      content.style.opacity = '1';
    }, 50);
  }, 300);
}

function renderCarouselDots() {
  const dotsContainer = document.getElementById('carouselDots');
  if (!dotsContainer) return;
  
  let dotsHTML = '';
  for (let i = 0; i < featuredReviews.length; i++) {
    const isActive = i === currentCarouselIndex;
    const bg = isActive ? '{{COLOR_PRIMARY}}' : '#d0d0d0';
    const scale = isActive ? 1.2 : 1;
    dotsHTML += "<button onclick=\"goToCarouselReview(" + i + ")\" style=\"width:12px;height:12px;border-radius:50%;border:none;cursor:pointer;transition:all 0.3s ease;background:" + bg + ";transform:scale(" + scale + ")\" aria-label=\"Go to review " + (i + 1) + "\"></button>";
  }
  dotsContainer.innerHTML = dotsHTML;
}

function nextCarouselReview() {
  currentCarouselIndex = (currentCarouselIndex + 1) % featuredReviews.length;
  renderCarouselReview(currentCarouselIndex);
  renderCarouselDots();
}

function prevCarouselReview() {
  currentCarouselIndex = (currentCarouselIndex - 1 + featuredReviews.length) % featuredReviews.length;
  renderCarouselReview(currentCarouselIndex);
  renderCarouselDots();
}

function goToCarouselReview(index) {
  currentCarouselIndex = index;
  renderCarouselReview(currentCarouselIndex);
  renderCarouselDots();
  
  if (carouselInterval) {
    clearInterval(carouselInterval);
    startCarouselAutoRotation();
  }
}

function startCarouselAutoRotation() {
  if (carouselInterval) {
    clearInterval(carouselInterval);
  }
  
  carouselInterval = setInterval(function() {
    if (!isPaused) {
      nextCarouselReview();
    }
  }, 5000);
}

function initCarousel() {
  const carousel = document.getElementById('featuredCarousel');
  if (!carousel) return;
  
  renderCarouselReview(0);
  renderCarouselDots();
  startCarouselAutoRotation();
  
  carousel.addEventListener('mouseenter', function() {
    isPaused = true;
  });
  
  carousel.addEventListener('mouseleave', function() {
    isPaused = false;
  });
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initCarousel);
} else {
  initCarousel();
}


function showCookieSettings() {
  // Reset consent and show banner again
  localStorage.removeItem('cookieConsent');
  document.getElementById('cookieBanner').classList.add('show');
}
</script>


<!-- Purchase Toast Notifications -->
<div id="purchaseToast" class="purchase-toast">
  <div class="purchase-toast-icon"></div>
  <div class="purchase-toast-text">
    <div class="purchase-toast-name"></div>
    <div class="purchase-toast-location"></div>
    <div class="purchase-toast-time"></div>
  </div>
</div>

<!-- Sold Out Notification -->
<div id="soldoutNotification" class="soldout-notification">
  <svg viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
  </svg>
  <span>Size XS just sold out!</span>
</div>

<!-- Exit Transition Overlay - Seamless redirect to payment -->
<div id="exitTransition" class="exit-transition" aria-live="polite" aria-busy="false">
  <div class="exit-transition-content">
    <div class="exit-spinner" role="status" aria-label="Loading"></div>
    <p class="exit-title">Connecting to secure checkout...</p>
    <p class="exit-subtitle">Please wait, do not close this page</p>
    <div class="exit-trust">
      <span><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg> 256-bit SSL</span>
      <span><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Verified Partner</span>
    </div>
  </div>
</div>

</body>
</html>
